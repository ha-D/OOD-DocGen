/*! docgen 26-04-2015 */
function UseCasePageCtrlImpl(a,b,c,d,e){a.subsystems2=[{name:"firstsubsystem",usecases:[{title:"Login to the system",description:"قرار اس از سیستم خروج کند",primaryActors:["user"],secondaryActors:[],preconditions:[],postconditions:[],mainflow:[],alternatives:[]},{title:"Logout from the system",description:"قرار اس از سیستم خروج کند",primaryActors:["user"],secondaryActors:[],preconditions:[],postconditions:[],mainflow:[],alternatives:[]}]},{name:"secondsubsystem",usecases:[{title:"Do sth important",description:"قرار اس از سیستم خروج کند",primaryActors:["user"],secondaryActors:[],precondtions:[],postconditions:[],mainflow:[],alternatives:[]},{title:"Explode everything",description:"قرار اس از سیستم خروج کند",primaryActors:["user"],secondaryActors:[],precondtions:[],postconditions:[],mainflow:[],alternatives:[]}]}],a.dragEnabled=!0;var f={};a.configFactory=function(b){if(f[b])return f[b];var d={group:"subsystems",index:b,disabled:!a.dragEnabled,onSort:function(b){b.models;console.log(a.subsystems),c(function(){a.save()})}};return f[b]=d,d},a.createSubSystem=function(b){var c={name:b,usecases:[]};a.subsystems.push(c)},a.openUsecaseForm=function(a){return d.show({templateUrl:"partials/usecase_dialog.html",locals:{usecase:a},controller:"UseCaseDetailsCtrl"})},a.openUsecase=function(b){a.openUsecaseForm(b).then(function(){a.save()})},a.newUsecase=function(b){var c={title:"",description:"",primaryActors:[],secondaryActors:[],preconditions:[],postconditions:[],mainflow:[],alternatives:[]};a.openUsecaseForm(c).then(function(){b.usecases.push(c),a.save()})},a.newSubsystem=function(){a.subsystems.push({name:a.newSubsystemName,usecases:[]}),a.newSubsystemName="",a.save()},a.deleteSubsystem=function(b){var c=d.confirm().content("You sure you want to delete "+b.name+"?").ok("Yes").cancel("No");d.show(c).then(function(){var c=a.subsystems.indexOf(b);-1!==c&&a.subsystems.splice(c,1)})},a.openEditDialog=function(){return d.show({templateUrl:"partials/usecase_edit.html",locals:{data:a.subsystems},controller:"UseCaseEditJSONCtrl"}).then(function(b){a.subsystems=b,a.save()})},a.createTexLink=function(){b.get("partials/usecase.tex").success(function(b){var c=Handlebars.compile(b),d=c({subsystems:a.subsystems});a.texContent=d,a.texLink=encodeURIComponent(d)})},a.clearTexLink=function(){a.texLink=""},a.save=function(){e.save({key:"subsystems",subsystems:a.subsystems})},a.load=function(){e.get("subsystems",function(b){a.subsystems=b.subsystems})},a.load()}function UseCasePageCtrl(a,b,c,d){a.testlist=["hasdsad","asdad","asd"];new Lawnchair({name:"usecase"},function(e){UseCasePageCtrlImpl(a,b,c,d,this)})}function UseCaseDetailsCtrl(a,b,c){a.usecase=c,a.addPrecondition=function(b){var c=b.target.value;b.target.value="",a.usecase.preconditions.push(c)},a.removePrecondition=function(b){a.usecase.preconditions.splice(b,1)},a.addPostcondition=function(b){var c=b.target.value;b.target.value="",a.usecase.postconditions.push(c)},a.removePostcondition=function(b){a.usecase.postconditions.splice(b,1)},a.addFlow=function(b,c){var d=b.target.value;b.target.value="",c?c.subflow.push({text:d}):a.usecase.mainflow.push({text:d})},a.removeFlow=function(b,c){c?c.subflow.splice(b,1):a.usecase.mainflow.splice(b,1)},a.saveAndClose=function(){b.hide()}}function UseCaseEditJSONCtrl(a,b,c,d){a.jsonData=angular.toJson(d,4),a.saveAndClose=function(){try{var d=angular.fromJson(a.jsonData);b.hide(d)}catch(e){c.show(c.simple().content("Invalid JSON string"))}},a.close=function(){b.cancel()}}var app=angular.module("myApp",["ngMaterial","ngRoute","ng-sortable"]);app.config(["$routeProvider",function(a){a.when("/",{templateUrl:"partials/usecases.html"})}]),app.config(["$compileProvider",function(a){a.aHrefSanitizationWhitelist(/^\s*(https?|ftp|data):/)}]),app.directive("ngEnter",function(){function a(a,b,c){b.bind("keydown keypress",function(b){13===b.which&&(a.$apply(function(){a.ngEnter({event:b})}),b.preventDefault())})}return{link:a,scope:{ngEnter:"&"}}});var app=angular.module("myApp");app.controller("UseCasePageCtrl",["$scope","$http","$timeout","$mdDialog",UseCasePageCtrl]),app.controller("UseCaseDetailsCtrl",["$scope","$mdDialog","usecase",UseCaseDetailsCtrl]),app.controller("UseCaseEditJSONCtrl",["$scope","$mdDialog","$mdToast","data",UseCaseEditJSONCtrl]);