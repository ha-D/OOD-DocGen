/*! docgen 26-04-2015 */
function UseCasePageCtrlImpl(a,b,c,d,e){a.dragEnabled=!0,a.data={};var f={};a.configFactory=function(b){if(f[b])return f[b];var d={group:"subsystems",index:b,disabled:!a.dragEnabled,onSort:function(b){b.models;c(function(){a.save()})}};return f[b]=d,d},a.openUsecaseForm=function(a){return d.show({templateUrl:"partials/usecase_dialog.html",locals:{usecase:a},controller:"UseCaseDetailsCtrl"})},a.openUsecase=function(b){a.openUsecaseForm(b).then(function(){a.save()})},a.newUsecase=function(b){var c={title:"",description:"",primaryActors:[],secondaryActors:[],preconditions:[],postconditions:[],mainflow:[],alternatives:[]};a.openUsecaseForm(c).then(function(){b.usecases.push(c),a.save()})},a.newSubsystem=function(){a.data.subsystems||(a.data.subsystems=[]),a.data.subsystems.push({name:a.newSubsystemName,usecases:[]}),a.newSubsystemName="",a.save()},a.deleteSubsystem=function(b){var c=d.confirm().content("You sure you want to delete "+b.name+"?").ok("Yes").cancel("No");d.show(c).then(function(){var c=a.data.subsystems.indexOf(b);-1!==c&&a.data.subsystems.splice(c,1)})},a.openEditDialog=function(){return d.show({templateUrl:"partials/usecase_edit.html",locals:{data:a.data},controller:"UseCaseEditJSONCtrl"}).then(function(b){a.data=b,a.save()})},a.openSnippetEditDialog=function(){return d.show({templateUrl:"partials/usecase_edit.html",locals:{data:a.data.snippets},controller:"UseCaseEditJSONCtrl"}).then(function(b){a.data.snippets=b,a.save()})},a.renderSubsystems=function(){function b(a){return a&&"@"==a[0]?d[a.slice(1)]:void 0}function c(a){if("string"==typeof a){var d=b(a);return d?c(d):a}if("object"==typeof a){for(var e in a)a[e]=c(a[e]);return a}return a}var d=a.data.snippets;return c(angular.copy(a.data.subsystems))},a.createTexLink=function(){b.get("partials/usecase.tex").success(function(b){var c=Handlebars.compile(b),d=a.renderSubsystems();console.log(d);var e=c({subsystems:d});a.texContent=e,a.texLink=encodeURIComponent(e)})},a.clearTexLink=function(){a.texLink=""},a.save=function(){e.save({key:"subsystems",subsystems:a.data.subsystems,snippets:a.data.snippets})},a.load=function(){e.get("subsystems",function(b){b?(a.data.subsystems=b.subsystems,a.data.snippets=b.snippets):a.data={subsystems:[],snippets:{}}})},a.load()}function UseCasePageCtrl(a,b,c,d){a.testlist=["hasdsad","asdad","asd"];new Lawnchair({name:"usecase"},function(e){UseCasePageCtrlImpl(a,b,c,d,this)})}function UseCaseDetailsCtrl(a,b,c){a.usecase=c,a.addPrecondition=function(b){var c=b.target.value;b.target.value="",a.usecase.preconditions.push(c)},a.removePrecondition=function(b){a.usecase.preconditions.splice(b,1)},a.addPostcondition=function(b){var c=b.target.value;b.target.value="",a.usecase.postconditions.push(c)},a.removePostcondition=function(b){a.usecase.postconditions.splice(b,1)},a.addAlternative=function(b){var c=b.target.value;b.target.value="",a.usecase.alternatives.push(c)},a.removeAlternative=function(b){a.usecase.alternatives.splice(b,1)},a.addFlow=function(b,c){var d=b.target.value;b.target.value="",c?c.subflow.push({text:d}):a.usecase.mainflow.push({text:d})},a.removeFlow=function(b,c){c?c.subflow.splice(b,1):a.usecase.mainflow.splice(b,1)},a.saveAndClose=function(){b.hide()}}function UseCaseEditJSONCtrl(a,b,c,d){a.jsonData=angular.toJson(d,4),a.saveAndClose=function(){try{var d=angular.fromJson(a.jsonData);b.hide(d)}catch(e){c.show(c.simple().content("Invalid JSON string"))}},a.close=function(){b.cancel()}}var app=angular.module("myApp",["ngMaterial","ngRoute","ng-sortable"]);app.config(["$routeProvider",function(a){a.when("/",{templateUrl:"partials/usecases.html"})}]),app.config(["$compileProvider",function(a){a.aHrefSanitizationWhitelist(/^\s*(https?|ftp|data):/)}]),app.directive("ngEnter",function(){function a(a,b,c){b.bind("keydown keypress",function(b){13===b.which&&(a.$apply(function(){a.ngEnter({event:b})}),b.preventDefault())})}return{link:a,scope:{ngEnter:"&"}}});var app=angular.module("myApp");app.controller("UseCasePageCtrl",["$scope","$http","$timeout","$mdDialog",UseCasePageCtrl]),app.controller("UseCaseDetailsCtrl",["$scope","$mdDialog","usecase",UseCaseDetailsCtrl]),app.controller("UseCaseEditJSONCtrl",["$scope","$mdDialog","$mdToast","data",UseCaseEditJSONCtrl]),Handlebars.registerHelper("flow",function(a,b){function c(a){d+="\\begin{enumerate}[itemsep=0pt,label*=\\arabic*.]\n";for(var b=0;b<a.length;b++)d+="\\item "+a[b].text+"\n",a[b].subflow&&a[b].subflow.length&&c(a[b].subflow);d+="\\end{enumerate}\n"}var d="";return c(a),d}),Handlebars.registerHelper("inc",function(a){return a+1});